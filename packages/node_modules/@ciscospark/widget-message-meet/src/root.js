import React, {PropTypes} from 'react';
import {Provider} from 'react-redux';
import {metrics} from '@ciscospark/react-component-utils';
import MessageMeetWidgetIntl from './intl-container';
import mainStore from './store';

export default function Root({accessToken, initialActivity, onEvent, startCall, toPersonEmail, toPersonId, store}) {
  const storeInstance = store || mainStore;
  metrics.saveLoadStart();
  return (
    <Provider store={storeInstance}>
      <MessageMeetWidgetIntl
        accessToken={accessToken}
        initialActivity={initialActivity}
        onEvent={onEvent}
        startCall={startCall}
        toPersonEmail={toPersonEmail}
        toPersonId={toPersonId}
      />
    </Provider>
  );
}

Root.propTypes = {
  accessToken: PropTypes.string.isRequired,
  initialActivity: PropTypes.string,
  onEvent: PropTypes.func,
  startCall: PropTypes.bool,
  store: PropTypes.object,
  toPersonEmail: PropTypes.string,
  toPersonId: PropTypes.string
};
