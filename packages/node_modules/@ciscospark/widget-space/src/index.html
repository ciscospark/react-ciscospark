
<!DOCTYPE html>
<html>
<head>
  <title>Space Widget Demo</title>
  <meta charset="utf8"/>
  <script nomodule src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.26.0/polyfill.min.js" integrity="sha256-WRc/eG3R84AverJv0zmqxAmdwQxstUpqkiE+avJ3WSo=" crossorigin="anonymous"></script>
</head>
<body>
<div style="float: left;">
  <h2>Browser Globals</h2>
  <button onClick="createWidget()">Create Widget</button>
  <button onClick="removeWidget()">Remove Widget</button>
  <div style="width: 500px; height: 500px;">
    <div id="ciscospark-widget-global"></div>
  </div>
  <div>Event: <span id="widget-events"></span></div>
</div>
 <!-- <div style="float: left;">
  <h2>Group: Data API</h2>
  <div style="width: 500px; height: 500px;">
    <main
      class="ciscospark-space"
      id="ciscospark-widget-data-api"
      data-toggle="ciscospark-space"
      data-access-token="<%= process.env.CISCOSPARK_ACCESS_TOKEN %>"
      data-space-id="<%= process.env.SPACE_ID %>"
    />
  </div>
</div>

<div style="float: left;">
  <h2>Direct: Data API</h2>
  <div style="width: 500px; height: 500px;">
    <main
      class="ciscospark-space"
      id="ciscospark-widget-direct-data-api"
      data-initial-activity="meet"
      data-toggle="ciscospark-space"
      data-access-token="<%= process.env.CISCOSPARK_ACCESS_TOKEN %>"
      data-to-person-email="<%= process.env.TO_PERSON_EMAIL %>"
    />
  </div>
</div> -->

<script type="text/javascript">
var widgetEl = document.getElementById('ciscospark-widget-global');
var widgetEventsEl = document.getElementById('widget-events');
function createWidget() {
  var widget = window.ciscospark.widget(widgetEl);
  widget.spaceWidget({
    accessToken: '<%= process.env.CISCOSPARK_ACCESS_TOKEN %>',
    spaceId: '<%= process.env.SPACE_ID %>',
    startCall: false,
    onEvent: function(name, data) {
      widgetEventsEl.innerText = name+'\n'+data;
      console.log(data);
    }
  });
}

function removeWidget() {
  var widget = ciscospark.widget(widgetEl);
  if (widget.remove) {
    widget.remove();
  }
}

</script>

</body>
</html>
